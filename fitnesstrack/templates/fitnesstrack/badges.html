{% extends "fitnesstrack/base_new.html" %}

{% block title %}Achievements - Fitness Tracker{% endblock %}

{% block content %}
<div style="max-width: 1200px;">
    <!-- Page Header -->
    <div style="margin-bottom: 32px;">
        <h1 class="text-4xl font-bold text-text-dark" style="margin-bottom: 8px;">ğŸ† Achievement Badges</h1>
        <p class="text-text-light">Unlock badges by completing challenges and milestones</p>
    </div>
    
    {% if messages %}
        <div class="mb-6">
            {% for message in messages %}
                <div class="p-4 rounded-2xl mb-3 {% if message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif message.tags == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <!-- Streak Counter -->
    {% if current_streak is not None %}
    <div class="bg-gradient-to-br from-brand-orange via-brand-purple to-brand-blue rounded-3xl text-white shadow-lg" style="padding: 32px; margin-bottom: 28px;">
        <div class="flex items-center justify-between flex-wrap gap-4">
            <div class="flex items-center gap-6">
                <div class="text-6xl">ğŸ”¥</div>
                <div>
                    <div class="text-5xl font-bold">{{ current_streak }}</div>
                    <div class="text-xl opacity-90">Day Streak</div>
                </div>
            </div>
            <div class="text-right">
                {% if current_streak >= 7 %}
                    <strong class="text-2xl">Amazing! Keep it up! ğŸ‰</strong>
                {% elif current_streak >= 3 %}
                    <strong class="text-2xl">Great momentum! ğŸ’ª</strong>
                {% elif current_streak > 0 %}
                    <strong class="text-2xl">You're on a roll! âš¡</strong>
                {% else %}
                    <strong class="text-2xl">Start your streak today! ğŸš€</strong>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Total Badges Count -->
    <div class="bg-white rounded-3xl shadow-sm" style="padding: 28px; margin-bottom: 32px;">
        <h2 class="text-2xl font-bold text-text-dark mb-2">Your Achievements</h2>
        <p class="text-text-light mb-4">You've earned <strong class="text-brand-purple">{{ earned_badges|length }}</strong> out of <strong>{{ total_badges }}</strong> badges!</p>
        <div class="relative w-full bg-gray-200 rounded-full h-4">
            <div class="absolute top-0 left-0 bg-gradient-to-r from-brand-purple to-brand-blue h-4 rounded-full transition-all duration-500" style="width: {% widthratio earned_badges|length total_badges 100 %}%"></div>
        </div>
    </div>
    
    <!-- Earned Badges -->
    {% if earned_badges %}
    <div style="margin-bottom: 40px;">
        <h2 class="text-3xl font-bold text-text-dark" style="margin-bottom: 24px;">âœ¨ Earned Badges</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;">
            {% for badge in earned_badges %}
            <div class="bg-gradient-to-br from-brand-purple/10 to-brand-blue/10 rounded-3xl border-2 border-brand-purple shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center">{{ badge.icon }}</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">{{ badge.get_badge_type_display }}</h3>
                    <p class="text-text-light text-sm mb-3">{{ badge.description }}</p>
                    <p class="text-xs text-brand-purple font-semibold">Earned: {{ badge.earned_date|date:"M d, Y" }}</p>
                    <div class="mt-4 inline-block px-4 py-2 bg-green-500 text-white rounded-full text-sm font-semibold">âœ“ Earned</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Badges In Progress -->
    {% if badge_progress %}
    <div style="margin-bottom: 40px;">
        <h2 class="text-3xl font-bold text-text-dark" style="margin-bottom: 24px;">ğŸ¯ Badges In Progress</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;">
            <!-- 7-Day Consistency -->
            {% if 'consistency_7' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ”¥</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">7-Day Warrior</h3>
                    <p class="text-text-light text-sm mb-3">Complete activities for 7 consecutive days</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light mb-2">
                            {{ badge_progress.consistency_7.current }} / {{ badge_progress.consistency_7.required }} days
                        </div>
                        <div class="relative w-full bg-gray-200 rounded-full h-3">
                            <div class="absolute top-0 left-0 bg-brand-purple h-3 rounded-full transition-all duration-500" style="width: {{ badge_progress.consistency_7.percentage }}%"></div>
                        </div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">{{ badge_progress.consistency_7.percentage|floatformat:0 }}%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- 30-Day Consistency -->
            {% if 'consistency_30' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ’ª</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">30-Day Champion</h3>
                    <p class="text-text-light text-sm mb-3">Complete activities for 30 consecutive days</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light mb-2">
                            {{ badge_progress.consistency_30.current }} / {{ badge_progress.consistency_30.required }} days
                        </div>
                        <div class="relative w-full bg-gray-200 rounded-full h-3">
                            <div class="absolute top-0 left-0 bg-brand-purple h-3 rounded-full transition-all duration-500" style="width: {{ badge_progress.consistency_30.percentage }}%"></div>
                        </div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">{{ badge_progress.consistency_30.percentage|floatformat:0 }}%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- First Workout -->
            {% if 'first_workout' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸŒŸ</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">First Steps</h3>
                    <p class="text-text-light text-sm mb-3">Complete your first workout</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light">Log your first activity!</div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">0%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- Calorie Burner 1000 -->
            {% if 'calorie_burner_1000' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ”¥</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">Calorie Crusher</h3>
                    <p class="text-text-light text-sm mb-3">Burn 1,000 total calories</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light mb-2">
                            {{ badge_progress.calorie_burner_1000.current }} / {{ badge_progress.calorie_burner_1000.required }} calories
                        </div>
                        <div class="relative w-full bg-gray-200 rounded-full h-3">
                            <div class="absolute top-0 left-0 bg-brand-orange h-3 rounded-full transition-all duration-500" style="width: {{ badge_progress.calorie_burner_1000.percentage }}%"></div>
                        </div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">{{ badge_progress.calorie_burner_1000.percentage|floatformat:0 }}%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- Calorie Burner 5000 -->
            {% if 'calorie_burner_5000' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ’¥</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">Inferno Master</h3>
                    <p class="text-text-light text-sm mb-3">Burn 5,000 total calories</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light mb-2">
                            {{ badge_progress.calorie_burner_5000.current }} / {{ badge_progress.calorie_burner_5000.required }} calories
                        </div>
                        <div class="relative w-full bg-gray-200 rounded-full h-3">
                            <div class="absolute top-0 left-0 bg-brand-orange h-3 rounded-full transition-all duration-500" style="width: {{ badge_progress.calorie_burner_5000.percentage }}%"></div>
                        </div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">{{ badge_progress.calorie_burner_5000.percentage|floatformat:0 }}%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- Early Bird -->
            {% if 'early_bird' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸŒ…</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">Early Bird</h3>
                    <p class="text-text-light text-sm mb-3">Complete a workout before 7:00 AM</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light">Log an activity before 7 AM!</div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">0%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- Hydration Master -->
            {% if 'hydration_master' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ’§</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">Hydration Master</h3>
                    <p class="text-text-light text-sm mb-3">Meet your water intake goal for 7 consecutive days</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light mb-2">
                            {{ badge_progress.hydration_master.current }} / {{ badge_progress.hydration_master.required }} days
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                            <div class="bg-brand-blue h-3 rounded-full transition-all duration-500" style="width: {{ badge_progress.hydration_master.percentage }}%"></div>
                        </div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">{{ badge_progress.hydration_master.percentage|floatformat:0 }}%</div>
                </div>
            </div>
            {% endif %}
            
            <!-- Weight Goal -->
            {% if 'weight_goal' in badge_progress %}
            <div class="bg-white rounded-3xl border-2 border-gray-200 shadow-sm hover:shadow-lg transition-shadow" style="min-width: 0; overflow: hidden; padding: 28px;">
                <div class="text-6xl mb-4 text-center opacity-60">ğŸ¯</div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-text-dark mb-2">Goal Achiever</h3>
                    <p class="text-text-light text-sm mb-3">Reach your weight goal</p>
                    <div class="mb-3">
                        <div class="text-sm text-text-light">Set and reach your weight goal!</div>
                    </div>
                    <div class="inline-block px-4 py-2 bg-gray-200 text-text-dark rounded-full text-sm font-semibold">In Progress</div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    <!-- No Badges Yet -->
    {% if not earned_badges and not badge_progress %}
    <div class="text-center py-16">
        <div class="text-8xl mb-6">ğŸ…</div>
        <h3 class="text-3xl font-bold text-text-dark mb-4">No Badges Yet!</h3>
        <p class="text-text-light mb-6">Start logging activities to earn your first badge.</p>
        <a href="{% url 'log_activity' %}" class="px-8 py-4 bg-brand-purple text-white rounded-full font-semibold hover:bg-brand-purple/90 transition-colors inline-block">Log Activity</a>
    </div>
    {% endif %}
    
    <!-- Quick Actions -->
    <div class="flex gap-4 justify-center" style="margin-top: 40px; padding-bottom: 20px;">
        <a href="{% url 'dashboard' %}" class="px-6 py-3 bg-gray-200 text-text-dark rounded-full font-semibold hover:bg-gray-300 transition-colors">&larr; Back to Dashboard</a>
        <a href="{% url 'progress_charts' %}" class="px-6 py-3 bg-brand-purple text-white rounded-full font-semibold hover:bg-brand-purple/90 transition-colors">View Progress Charts ğŸ“Š</a>
    </div>
</div>

{% endblock %}
