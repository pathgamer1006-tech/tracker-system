{% extends "fitnesstrack/base_new.html" %}

{% block title %}Workout Log - FitTrack{% endblock %}

{% block content %}
<div style="max-width: 1200px;">
<!-- Page Header -->
<div class="flex items-center justify-between" style="margin-bottom: 32px;">
    <div>
        <h1 class="text-4xl font-bold text-text-dark mb-2">Workout Log</h1>
        <p class="text-text-light text-lg">Track and manage your fitness activities</p>
    </div>
    <a href="{% url 'log_activity' %}" class="px-6 py-3 bg-brand-purple text-white rounded-full font-semibold hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Log New Activity
    </a>
</div>
    
    {% if messages %}
        <div class="mb-6">
            {% for message in messages %}
                <div class="p-4 {% if message.tags == 'success' %}bg-green-50 border border-green-200 text-green-800{% elif message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800{% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %} rounded-2xl mb-3">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <!-- Summary Cards -->
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 32px;">
        <div style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; overflow: hidden; min-width: 0;">
            <div class="flex items-center gap-4 mb-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-purple to-indigo-600 flex items-center justify-center text-white text-xl shadow-lg">
                    üèÉ
                </div>
                <div>
                    <h3 class="text-3xl font-bold text-text-dark">{{ total_activities|default:"0" }}</h3>
                    <p class="text-text-light text-sm">Total Activities</p>
                </div>
            </div>
        </div>
        <div style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; overflow: hidden; min-width: 0;">
            <div class="flex items-center gap-4 mb-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-orange to-red-500 flex items-center justify-center text-white text-xl shadow-lg">
                    üî•
                </div>
                <div>
                    <h3 class="text-3xl font-bold text-text-dark">{{ total_calories|default:"0" }}</h3>
                    <p class="text-text-light text-sm">Total Calories</p>
                </div>
            </div>
        </div>
        <div style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; overflow: hidden; min-width: 0;">
            <div class="flex items-center gap-4 mb-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-blue to-blue-600 flex items-center justify-center text-white text-xl shadow-lg">
                    ‚è±Ô∏è
                </div>
                <div>
                    <h3 class="text-3xl font-bold text-text-dark">{{ total_duration|default:"0" }} min</h3>
                    <p class="text-text-light text-sm">Total Duration</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Activities Table -->
    {% if activities %}
    <div style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; overflow: hidden;">
        <div class="p-6 border-b border-gray-200">
            <h2 class="text-2xl font-bold text-text-dark">Activity History</h2>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Date</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Activity</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Duration</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Distance</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Calories</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-text-light uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    {% for activity in activities %}
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-text-dark">{{ activity.date_created|date:"M d, Y H:i" }}</td>
                        <td class="px-6 py-4">
                            <div class="font-semibold text-text-dark">{{ activity.get_activity_type_display }}</div>
                            {% if activity.notes %}
                            <div class="text-sm text-text-light">{{ activity.notes|truncatewords:10 }}</div>
                            {% endif %}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-text-dark">{{ activity.duration_minutes }} min</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-text-dark">{{ activity.distance_km|default:"--" }} km</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="text-sm font-semibold text-brand-orange">{{ activity.calories_burned }} cal</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                            <a href="{% url 'activity_detail' activity.pk %}" class="inline-flex items-center px-3 py-1 bg-brand-purple text-white rounded-full hover:bg-indigo-700 transition-all">View</a>
                            <a href="{% url 'edit_activity' activity.pk %}" class="inline-flex items-center px-3 py-1 bg-gray-200 text-text-dark rounded-full hover:bg-gray-300 transition-all">Edit</a>
                            <a href="{% url 'delete_activity' activity.pk %}" class="inline-flex items-center px-3 py-1 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition-all">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        {% if is_paginated %}
        <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
            <div class="text-sm text-text-light">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </div>
            <div class="flex gap-2">
                {% if page_obj.has_previous %}
                    <a href="?page=1" class="px-4 py-2 bg-gray-100 text-text-dark rounded-full hover:bg-gray-200 transition-all">First</a>
                    <a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 bg-gray-100 text-text-dark rounded-full hover:bg-gray-200 transition-all">Previous</a>
                {% endif %}
                
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 bg-brand-purple text-white rounded-full hover:bg-indigo-700 transition-all">Next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}" class="px-4 py-2 bg-brand-purple text-white rounded-full hover:bg-indigo-700 transition-all">Last</a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
    {% else %}
    <div class="bg-white rounded-3xl shadow-sm p-12 text-center">
        <div class="text-6xl mb-4">üèÉ‚Äç‚ôÇÔ∏è</div>
        <h3 class="text-2xl font-bold text-text-dark mb-2">No activities logged yet</h3>
        <p class="text-text-light mb-6">Start tracking your fitness journey today!</p>
        <a href="{% url 'log_activity' %}" class="inline-flex items-center gap-2 px-6 py-3 bg-brand-purple text-white rounded-full font-semibold hover:bg-indigo-700 transition-all shadow-lg">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            Log Your First Activity
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
