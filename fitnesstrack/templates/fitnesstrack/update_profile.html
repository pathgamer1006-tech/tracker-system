{% extends "fitnesstrack/base_new.html" %}

{% block title %}Update Profile - Fitness Tracker{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8" style="overflow: hidden;">
    <!-- Page Header -->
    <div class="mb-8">
        <h1 class="text-4xl font-bold text-text-dark mb-2">{{ title }}</h1>
        <p class="text-text-light">Keep your profile information up to date</p>
    </div>
    
    {% if messages %}
        <div class="mb-6">
            {% for message in messages %}
                <div class="p-4 rounded-2xl mb-3 {% if message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif message.tags == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <div style="background: white; border-radius: 20px; padding: 32px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; overflow: hidden;">
        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="{{ form.date_of_birth.id_for_label }}" class="block text-sm font-semibold text-text-dark mb-2">Date of Birth</label>
                {{ form.date_of_birth }}
                {% if form.date_of_birth.errors %}
                    <div class="text-red-600 text-sm mt-1">{{ form.date_of_birth.errors }}</div>
                {% endif %}
                <small class="block text-text-light text-xs mt-1">Used to calculate age and BMR</small>
            </div>
            
            <div>
                <label for="{{ form.gender.id_for_label }}" class="block text-sm font-semibold text-text-dark mb-2">Gender</label>
                {{ form.gender }}
                {% if form.gender.errors %}
                    <div class="text-red-600 text-sm mt-1">{{ form.gender.errors }}</div>
                {% endif %}
                <small class="block text-text-light text-xs mt-1">Used for BMR calculations</small>
            </div>
            
            <div>
                <label for="{{ form.height_cm.id_for_label }}" class="block text-sm font-semibold text-text-dark mb-2">Height (cm)</label>
                {{ form.height_cm }}
                {% if form.height_cm.errors %}
                    <div class="text-red-600 text-sm mt-1">{{ form.height_cm.errors }}</div>
                {% endif %}
                <small class="block text-text-light text-xs mt-1">Your height in centimeters</small>
            </div>
            
            <div>
                <label for="{{ form.weight_kg.id_for_label }}" class="block text-sm font-semibold text-text-dark mb-2">Current Weight (kg)</label>
                {{ form.weight_kg }}
                {% if form.weight_kg.errors %}
                    <div class="text-red-600 text-sm mt-1">{{ form.weight_kg.errors }}</div>
                {% endif %}
                <small class="block text-text-light text-xs mt-1">Update via "Update Biometrics" to track history</small>
            </div>
            
            <div>
                <label for="{{ form.activity_level.id_for_label }}" class="block text-sm font-semibold text-text-dark mb-2">Activity Level</label>
                {{ form.activity_level }}
                {% if form.activity_level.errors %}
                    <div class="text-red-600 text-sm mt-1">{{ form.activity_level.errors }}</div>
                {% endif %}
                <small class="block text-text-light text-xs mt-1 leading-relaxed">
                    <strong>Sedentary:</strong> Little or no exercise<br>
                    <strong>Active:</strong> Moderate exercise 3-5 days/week<br>
                    <strong>Athlete:</strong> Intense exercise 6-7 days/week
                </small>
            </div>
            
            <div class="bg-blue-50 border-l-4 border-brand-blue p-4 rounded-lg">
                <strong class="text-brand-blue block mb-2">ℹ️ Why we need this information:</strong>
                <ul class="text-brand-blue text-sm space-y-1 list-disc ml-5">
                    <li>Calculate your BMI and ideal weight range</li>
                    <li>Estimate your daily calorie needs (BMR & TDEE)</li>
                    <li>Accurately calculate calories burned during activities</li>
                    <li>Personalize water intake recommendations</li>
                </ul>
            </div>
            
            <div class="flex gap-4 pt-4">
                <button type="submit" class="px-8 py-3 bg-brand-purple text-white rounded-full font-semibold hover:bg-brand-purple/90 transition-colors">Save Profile</button>
                <a href="{% url 'dashboard' %}" class="px-8 py-3 bg-gray-200 text-text-dark rounded-full font-semibold hover:bg-gray-300 transition-colors">Cancel</a>
            </div>
        </form>
    </div>
</div>

{% endblock %}
